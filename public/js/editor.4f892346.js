(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["editor"],{"49d7":function(t,e,n){"use strict";n.r(e);var i=n("7a23"),a={class:"videoplayer"},u={id:"videoplayer-controls"},o={class:"videoplayer-chapters"},c={class:"videoplayer-chapter-title"},l={class:"videoplayer-chapter-game"},r={class:"videoplayer-cut"},s=Object(i["h"])("input",{type:"hidden",name:"vod",value:"{{ vodData.basename }}"},null,-1);function d(t,e,n,d,h,p){return Object(i["q"])(),Object(i["d"])("div",a,[Object(i["h"])("video",{id:"video",ref:"player",src:t.vodData.webpath+"/"+t.vodData.basename+".mp4",onTimeupdate:e[1]||(e[1]=function(){return t.updateVideoTime&&t.updateVideoTime.apply(t,arguments)}),width:"1280"},null,40,["src"]),Object(i["h"])("div",u,[Object(i["h"])("button",{class:"button",onClick:e[2]||(e[2]=function(){return t.play&&t.play.apply(t,arguments)})},"Play"),Object(i["h"])("button",{class:"button",onClick:e[3]||(e[3]=function(){return t.pause&&t.pause.apply(t,arguments)})},"Pause")]),Object(i["h"])("div",{id:"timeline",ref:"timeline",onClick:e[4]||(e[4]=function(){return t.seek&&t.seek.apply(t,arguments)})},[Object(i["h"])("div",{id:"timeline-cut",style:t.timelineCutStyle},null,4),Object(i["h"])("div",{id:"timeline-playhead",style:t.timelinePlayheadStyle},null,4)],512),Object(i["h"])("div",o,[(Object(i["q"])(!0),Object(i["d"])(i["a"],null,Object(i["u"])(t.vodData.chapters,(function(e){return Object(i["q"])(),Object(i["d"])("div",{key:e,title:e.title+" | \\n"+e.game_name,class:"videoplayer-chapter",style:{width:e.width+"%"},onClick:function(n){return t.scrub(e.offset,e.duration)}},[Object(i["h"])("div",c,Object(i["x"])(e.title),1),Object(i["h"])("div",l,Object(i["x"])(e.game_name),1)],12,["title","onClick"])})),128))]),Object(i["h"])("div",r,[s,Object(i["h"])("div",null,[Object(i["h"])("button",{type:"button",class:"button",onClick:e[5]||(e[5]=function(e){return t.timeIn=Math.round(t.currentVideoTime)})},"Mark in"),Object(i["C"])(Object(i["h"])("input",{class:"input",name:"start","onUpdate:modelValue":e[6]||(e[6]=function(e){return t.timeIn=e}),placeholder:"In timestamp"},null,512),[[i["z"],t.timeIn]])]),Object(i["h"])("div",null,[Object(i["h"])("button",{type:"button",class:"button",onClick:e[7]||(e[7]=function(e){return t.timeOut=Math.round(t.currentVideoTime)})},"Mark out"),Object(i["C"])(Object(i["h"])("input",{class:"input",name:"end","onUpdate:modelValue":e[8]||(e[8]=function(e){return t.timeOut=e}),placeholder:"Out timestamp"},null,512),[[i["z"],t.timeOut]])]),Object(i["h"])("div",null,[Object(i["C"])(Object(i["h"])("input",{class:"input",type:"text",name:"name","onUpdate:modelValue":e[9]||(e[9]=function(e){return t.cutName=e}),placeholder:"Name (optional)"},null,512),[[i["z"],t.cutName]])]),Object(i["h"])("div",null,[Object(i["h"])("button",{type:"button",class:"button",onClick:e[10]||(e[10]=function(){return t.submit&&t.submit.apply(t,arguments)})},"Submit cut")])])])}n("d3b7"),n("25f0");var h=Object(i["i"])({name:"Editor",data:function(){return{vodData:{},timeIn:0,timeOut:0,currentVideoTime:0,cutName:""}},created:function(){this.fetchData()},props:{vod:String},methods:{fetchData:function(){var t=this;fetch("/api/v0/vod/".concat(this.vod,"/")).then((function(t){return t.json()})).then((function(e){t.vodData=e.data,console.log(e)}))},play:function(){console.log("play",this.$refs.player),this.$refs.player.play()},pause:function(){console.log("pause",this.$refs.player),this.$refs.player.pause()},scrub:function(t,e){var n=this.vodData.game_offset;this.timeIn=Math.round(t-n),this.timeOut=Math.round(t+e-n)},seek:function(t){console.log("seek",t);var e=this.$refs.player.duration,n=this.$refs.timeline.getBoundingClientRect(),i=(t.clientX-n.left)/this.$refs.timeline.clientWidth,a=Math.round(e*i);this.$refs.player.currentTime=a},updateVideoTime:function(t){this.currentVideoTime=t.target.currentTime},submit:function(){console.log("submit",this.timeIn,this.timeOut,this.cutName);var t=new FormData;t.append("time_in",this.timeIn.toString()),t.append("time_out",this.timeOut.toString()),t.append("name",this.cutName),fetch("/api/v0/vod/".concat(this.vod,"/cut"),{method:"POST",body:t}).then((function(t){return t.json()})).then((function(t){t.message&&alert(t.message),console.log(t)}))}},computed:{timelineCutStyle:function(){if(!this.currentVideoTime)return{left:"0%",right:"100%"};var t=this.$refs.player.duration;return{left:this.timeIn/t*100+"%",right:100-this.timeOut/t*100+"%"}},timelinePlayheadStyle:function(){if(!this.currentVideoTime)return{left:"0%"};var t=this.currentVideoTime/this.$refs.player.duration*100;return{left:t+"%"}}}});h.render=d;e["default"]=h}}]);
//# sourceMappingURL=editor.4f892346.js.map