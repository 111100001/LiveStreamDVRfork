{% extends "base.twig" %}

{% block content %}

<div class="container vertical">

    <section class="section" data-section="vods">

        <div class="section-title"><h1>Recorded VODs</h1></div>

        <div class="section-content">

            <div class="button-bar">

                <a class="button" href="?checkvod=1"><span class="icon"><i class="fa fa-globe"></i></span> Check if VODs exist</a>
                {% if checkvod %}
                    {% if is_a_vod_deleted %}
                        - <strong>A VOD IS DELETED</strong>
                    {% else %}
                        - all vods seem to still exist
                    {% endif %}
                {% endif %}

                <a class="button" href="?rebuild_segments=1"><span class="icon"><i class="fa fa-video-slash"></i></span> Rebuild segments</a>
                <a class="button" href="?match_vod=1"><span class="icon"><i class="fa fa-copy"></i></span> Match VODs</a>

                <button class="button" onclick="notifyMe();"><span class="icon"><i class="fa fa-bell"></i></span> Notify</button>

                <button class="button" onclick="window.forceRefresh()"><span class="icon"><i class="fa fa-sync"></i></span> Refresh vods</button>

                <label class="checkbox"><input type="checkbox" id="useSpeechOption" /> Speech</label>
                <label class="checkbox"><input type="checkbox" id="singlePageOption" /> Single Page</label>

            </div>
            
            <br>

            {% for streamer in streamerList %}

                {% include 'components/streamer.twig' %}
                
            {% endfor %}

            <div>
                <strong>Total size: {{ total_size|formatBytes }}</strong><br>
                <strong>Free space: {{ free_size|formatBytes }}</strong>
            </div>

        </div>

    </section>


    <section class="section" style="display: none;" data-section="debug">

        <div class="section-title"><h1>Hook</h1></div>

        <div class="section-content">
        
        <form method="post" action="hook.php">
            <textarea class="input" name="json"></textarea>
            <br><button class="button" type="submit">Hook</button>
        </form>

        </div>

    </section>

    {# logs #}
    <section class="section" data-section="logs">

        <div class="section-title"><h1>Logs</h1></div>

        <div class="section-content">

            <select id="log_select">
                {% for f in log_files %}
                    <option>{{ f }}</button>
                {% endfor %}
            </select>

            {% include 'components/logviewer.twig' %}

        </div>

    </section>

    <div id="js-status"></div>

</div>

{% endblock %}
